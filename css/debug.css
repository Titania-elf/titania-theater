/* css/debug.css - æç®€ä»£ç ç¼–è¾‘å™¨é£æ ¼ (å«ç§»åŠ¨ç«¯é€‚é…) */

/* === åŸºç¡€æ ·å¼ (Desktop First) === */

.t-dbg-container {
    height: 90vh;
    display: flex;
    flex-direction: column;
    background: #1e1e1e; /* VS Code æ·±è‰²èƒŒæ™¯ */
    color: #cccccc;
    font-family: 'Segoe UI', sans-serif;
    overflow: hidden;
    /* ç§»åŠ¨ç«¯é˜²æŠ–åŠ¨ */
    max-width: 100vw;
}

/* é¡¶éƒ¨çŠ¶æ€æ  */
.t-dbg-header-bar {
    height: 32px;
    background: #252526;
    border-bottom: 1px solid #333;
    display: flex;
    align-items: center;
    padding: 0 15px;
    font-size: 0.85em;
    color: #888;
    gap: 20px;
    flex-shrink: 0;
    white-space: nowrap;
    overflow-x: auto; /* é˜²æ­¢å°å±æ–‡å­—æº¢å‡º */
    scrollbar-width: none; /* éšè—æ»šåŠ¨æ¡ */
}
.t-dbg-header-bar::-webkit-scrollbar { display: none; }

.t-dbg-stat-item { display: flex; align-items: center; gap: 6px; }
.t-dbg-stat-item i { color: #bfa15f; }
.t-dbg-highlight { color: #eee; font-family: monospace; }

/* ä¸»ä½“å¸ƒå±€ï¼šå·¦å³åˆ†æ  */
.t-dbg-body {
    flex-grow: 1;
    display: flex;
    overflow: hidden;
}

/* å·¦ä¾§ï¼šå‚æ•°ä¾§è¾¹æ  */
.t-dbg-sidebar {
    width: 220px;
    background: #252526;
    border-right: 1px solid #333;
    display: flex;
    flex-direction: column;
    padding: 10px 0;
    flex-shrink: 0;
    overflow-y: auto;
}

.t-param-group {
    padding: 10px 15px;
    border-bottom: 1px solid #2d2d2d;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.t-param-title {
    font-size: 0.75em;
    text-transform: uppercase;
    color: #666;
    margin-bottom: 8px;
    font-weight: bold;
    letter-spacing: 0.5px;
}
.t-param-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
    font-size: 0.9em;
    gap: 10px; /* é˜²æ­¢æ–‡å­—ç²˜è¿ */
}
.t-param-key { color: #999; white-space: nowrap; }
.t-param-val { color: #ddd; text-align: right; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.t-param-val.warn { color: #d7ba7d; } 
.t-param-val.error { color: #f48771; } 
.t-param-val.ok { color: #89d185; }

/* å³ä¾§ï¼šæºç ä¸»åŒºåŸŸ */
.t-dbg-main {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    background: #1e1e1e;
    overflow: hidden;
    min-width: 0; /* é˜²æ­¢ Flex å­é¡¹æº¢å‡º */
}

.t-editor-section {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    border-bottom: 1px solid #333;
    min-height: 0; 
}
.t-editor-section:last-child { border-bottom: none; }

.t-section-label {
    background: #2d2d2d;
    padding: 4px 15px;
    font-size: 0.8em;
    color: #aaa;
    border-bottom: 1px solid #333;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

.t-code-textarea {
    flex-grow: 1;
    background: #1e1e1e;
    color: #9cdcfe; 
    border: none;
    resize: none;
    padding: 10px 15px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 13px;
    line-height: 1.5;
    outline: none;
    white-space: pre;
    overflow: auto;
}
.t-code-textarea.user-ctx { color: #ce9178; }

/* åº•éƒ¨æ“ä½œæ  */
.t-dbg-footer {
    padding: 10px 15px;
    background: #252526;
    border-top: 1px solid #333;
    display: flex;
    justify-content: flex-end;
    flex-shrink: 0;
}

/* === ğŸ“± ç§»åŠ¨ç«¯é€‚é… (Media Queries) === */
@media screen and (max-width: 700px) {
    /* 1. ä¸»ä½“æµå‘æ”¹ä¸ºå‚ç›´ */
    .t-dbg-body {
        flex-direction: column;
    }

    /* 2. ä¾§è¾¹æ å˜èº«ä¸ºé¡¶éƒ¨æ¨ªå‘æ»šåŠ¨æ¡ */
    .t-dbg-sidebar {
        width: 100%;
        height: 85px; /* å›ºå®šé«˜åº¦ */
        flex-direction: row; /* å†…å®¹æ¨ªæ’ */
        overflow-x: auto; /* å…è®¸æ¨ªå‘æ»šåŠ¨ */
        overflow-y: hidden;
        border-right: none;
        border-bottom: 1px solid #333;
        background: #222;
        padding: 0;
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .t-dbg-sidebar::-webkit-scrollbar { display: none; }

    /* 3. å‚æ•°ç»„å˜ä¸ºå¡ç‰‡æ ·å¼ */
    .t-param-group {
        min-width: 140px; /* æœ€å°å®½åº¦ï¼Œé˜²æ­¢æŒ¤å‹ */
        border-bottom: none;
        border-right: 1px solid #333;
        padding: 5px 12px;
        flex-shrink: 0; /* é˜²æ­¢è¢«æŒ¤å° */
    }
    
    /* è°ƒæ•´å‚æ•°æ–‡å­—å¤§å° */
    .t-param-title { margin-bottom: 4px; font-size: 0.7em; }
    .t-param-row { margin-bottom: 2px; font-size: 0.8em; }

    /* 4. ä»£ç åŒºåŸŸè‡ªé€‚åº” */
    .t-dbg-main {
        height: calc(100% - 85px); /* å‡å»é¡¶éƒ¨æ¨ªæ¡é«˜åº¦ */
    }
    
    /* 5. å¤´éƒ¨çŠ¶æ€æ ç²¾ç®€ */
    .t-dbg-header-bar {
        font-size: 0.75em;
        padding: 0 10px;
        gap: 12px;
    }
}

/* --- ä»£ç æŠ˜å åˆ—è¡¨æ ·å¼ (æ–°å¢) --- */

/* æ›¿æ¢åŸæ¥çš„ textareaï¼Œæ”¹ä¸º div å®¹å™¨ */
.t-code-viewer {
    flex-grow: 1;
    background: #1e1e1e;
    color: #ce9178; /* User Context é»˜è®¤è‰² */
    overflow-y: auto;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 13px;
    padding: 0;
}

/* æ¯ä¸€è¡Œçš„å®¹å™¨ */
.t-fold-row {
    border-bottom: 1px solid #2a2a2a;
}

/* å¯ç‚¹å‡»çš„æ ‡é¢˜è¡Œ */
.t-fold-head {
    padding: 6px 15px;
    background: #252526;
    cursor: pointer;
    display: flex;
    align-items: center;
    color: #cccccc;
    user-select: none;
    transition: background 0.2s;
}
.t-fold-head:hover { background: #2d2d2d; }

/* æ ‡é¢˜é‡Œçš„å›¾æ ‡ */
.t-fold-icon {
    width: 16px;
    font-size: 0.8em;
    color: #888;
    transition: transform 0.2s;
    margin-right: 5px;
}
/* å±•å¼€çŠ¶æ€æ—‹è½¬å›¾æ ‡ */
.t-fold-row.open .t-fold-icon { transform: rotate(90deg); }

/* æ ‡é¢˜æ–‡å­— */
.t-fold-title { font-weight: bold; color: #9cdcfe; margin-right: 10px; }
.t-fold-meta { font-size: 0.85em; color: #666; font-style: italic; }

/* éšè—çš„å†…å®¹ä½“ */
.t-fold-body {
    display: none;
    padding: 10px 15px;
    background: #1e1e1e;
    white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œ */
    line-height: 1.5;
    border-left: 3px solid #333; /* è§†è§‰å¼•å¯¼çº¿ */
    color: #d4d4d4;
}
/* æ¿€æ´»æ—¶æ˜¾ç¤º */
.t-fold-row.open .t-fold-body { display: block; }

/* System Prompt ä¿æŒåŸæ¥çš„ Textarea æ ·å¼ï¼Œä½†æ”¹ä¸ªåé˜²å†²çª */
.t-simple-editor {
    flex-grow: 1;
    background: #1e1e1e;
    color: #9cdcfe;
    border: none;
    resize: none;
    padding: 10px 15px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 13px;
    outline: none;
    white-space: pre-wrap;
    overflow: auto;
}